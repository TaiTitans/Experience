
---
Kafka sá»­ dá»¥ng mÃ´ hÃ¬nh **Pull-based**, khÃ¡c vá»›i **Push-based** cá»§a cÃ¡c há»‡ thá»‘ng message queue truyá»n thá»‘ng nhÆ° RabbitMQ.

---

## ğŸ”¹ **1. Táº¡i Sao Kafka Chá»n Pull-Based Thay VÃ¬ Push-Based?**

|**MÃ´ hÃ¬nh**|**CÃ¡ch hoáº¡t Ä‘á»™ng**|**Æ¯u Ä‘iá»ƒm**|**NhÆ°á»£c Ä‘iá»ƒm**|
|---|---|---|---|
|**Push-Based (RabbitMQ, ActiveMQ)**|Broker **chá»§ Ä‘á»™ng Ä‘áº©y** message Ä‘áº¿n consumer ngay khi cÃ³ dá»¯ liá»‡u.|**Giáº£m Ä‘á»™ trá»…**, dá»… kiá»ƒm soÃ¡t tá»‘c Ä‘á»™ gá»­i.|Dá»… **quÃ¡ táº£i consumer** khi lÆ°á»£ng message lá»›n.|
|**Pull-Based (Kafka)**|Consumer **chá»§ Ä‘á»™ng láº¥y** message tá»« Kafka khi cáº§n.|**Chá»§ Ä‘á»™ng Ä‘iá»u chá»‰nh tá»‘c Ä‘á»™ xá»­ lÃ½**, trÃ¡nh quÃ¡ táº£i.|CÃ³ thá»ƒ gÃ¢y **delay** náº¿u consumer khÃ´ng pull thÆ°á»ng xuyÃªn.|

ğŸ”¥ **Kafka chá»n Pull-Based Ä‘á»ƒ trÃ¡nh quÃ¡ táº£i consumer** khi dá»¯ liá»‡u Ä‘áº¿n quÃ¡ nhanh.


## ğŸ”¹ **2. Pull-Based Trong Kafka Hoáº¡t Äá»™ng NhÆ° Tháº¿ NÃ o?**

### âœ… **Pull Message theo Offset**

- Má»—i consumer trong Kafka duy trÃ¬ **offset riÃªng** Ä‘á»ƒ theo dÃµi vá»‹ trÃ­ Ä‘á»c dá»¯ liá»‡u.
- Consumer cÃ³ thá»ƒ **Ä‘á»c láº¡i message cÅ©** báº±ng cÃ¡ch thay Ä‘á»•i offset.
- Consumer sá»­ dá»¥ng **poll()** Ä‘á»ƒ láº¥y batch message tá»« topic.

ğŸ“Œ **Consumer láº¥y message tá»« Kafka (Java Example)**:
```java
ConsumerRecords<String, String> records = consumer.poll(Duration.ofMillis(100));
for (ConsumerRecord<String, String> record : records) {
    System.out.println("Received: " + record.value());
}
```

ğŸ”¥ **Æ¯u Ä‘iá»ƒm:** Consumer cÃ³ thá»ƒ Ä‘iá»u chá»‰nh **tá»‘c Ä‘á»™ Ä‘á»c** theo kháº£ nÄƒng xá»­ lÃ½.

## ğŸ”¹ **3. So SÃ¡nh Pull vs. Push Trong Kafka VÃ  RabbitMQ**

|TiÃªu chÃ­|**Kafka (Pull-Based)**|**RabbitMQ (Push-Based)**|
|---|---|---|
|**CÆ¡ cháº¿ xá»­ lÃ½**|Consumer chá»§ Ä‘á»™ng láº¥y message|Broker Ä‘áº©y message ngay khi cÃ³|
|**Hiá»‡u suáº¥t**|**Tá»‘t hÆ¡n khi cÃ³ nhiá»u dá»¯ liá»‡u**|CÃ³ thá»ƒ bá»‹ quÃ¡ táº£i consumer|
|**Scalability**|Dá»… scale ngang vá»›i Consumer Group|Háº¡n cháº¿ khi load tÄƒng Ä‘á»™t ngá»™t|
|**Latency**|CÃ³ thá»ƒ cÃ³ Ä‘á»™ trá»… náº¿u consumer cháº­m|Tháº¥p hÆ¡n vÃ¬ push ngay|
|**Replay Message**|Äá»c láº¡i message cÅ© báº±ng offset|KhÃ´ng há»— trá»£|

ğŸ”¥ **Kafka phÃ¹ há»£p cho streaming data lá»›n**, cÃ²n **RabbitMQ phÃ¹ há»£p cho real-time message nhá»**.

## ğŸ”¥ **TÃ³m Táº¯t**

|CÆ¡ cháº¿|Kafka (Pull)|RabbitMQ (Push)|
|---|---|---|
|**Broker xá»­ lÃ½**|LÆ°u message cho Ä‘áº¿n khi Consumer láº¥y|Äáº©y ngay khi cÃ³ message|
|**Consumer xá»­ lÃ½**|Chá»§ Ä‘á»™ng pull dá»¯ liá»‡u|Bá»‹ Ä‘á»™ng nháº­n dá»¯ liá»‡u|
|**Tá»‘i Æ°u hiá»‡u suáº¥t**|TÄƒng throughput khi dá»¯ liá»‡u lá»›n|Dá»… quÃ¡ táº£i khi load tÄƒng|

ğŸš€ **Tiáº¿p theo: CÆ¡ cháº¿ Consumer Group & Load Balancing Trong Kafka!**


